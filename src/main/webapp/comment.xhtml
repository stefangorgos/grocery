<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title><h:outputText value="#{msg['message.welcome']}"/></title>
</h:head>

<f:metadata>
    <f:event type="preRenderView" listener="#{commentService.init()}"/>
    <f:event type="preRenderView" listener="#{productService.init()}"/>
    <f:viewParam name="selectedCommentId" value="#{commentService.selectedComment.id}"/>
</f:metadata>

<body>
<h:form id="comments">
    <h:panelGrid id="theGrid" columns="2" border="1">
    	<h:outputText value="Comment ID"></h:outputText>
		<h:outputText value="#{commentService.selectedComment.id}"></h:outputText>
        <h:outputText value="Product"/>
		<h:selectOneMenu value="#{commentService.selectedComment.productId}">
			<f:selectItems value="#{productService.products}" var="product" itemLabel="#{product.name}" itemValue="#{product.id}"/>
		</h:selectOneMenu>
    
        <h:outputText value="Comment"/>
        <h:inputText id="text" value="#{commentService.selectedComment.text}"/>

        <h:outputText value="Rating"/>
        <h:inputText  id="rating" value="#{commentService.selectedComment.rating}" converter="javax.faces.Number"/>

        <h:commandButton value="Save #{msg['label.saveButton']}" 
        	action="#{commentService.saveComment}"
            process="@this"
            rendered="#{empty commentService.selectedComment.id}"/>
		    
		<h:commandButton value="Update" 
		action="#{commentService.updateComment}"
		process="@this"
		rendered="#{not empty commentService.selectedComment.id}"/>
    </h:panelGrid>
</h:form>
<h:outputText value="#{selectedComment.text}"></h:outputText>
</body>
</html>

